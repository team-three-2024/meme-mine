{"version":3,"sources":["config.js","helpers/url.js","components/Canary.js","components/Lights.js","lib/GameOverScreen.js","components/CameraController.js","helpers/clean.js","components/Obstacles.js","components/Path.js","lib/Game.js","components/ProgressBar.js","context/GameContext.js","lib/StartScreen.js","components/Videos.js","index.js"],"names":["canaryConfig","objectUrl","hop","idle","walk","nodeCoords","nodeSigns","nodeScale","nodeGroupScale","meshColorIndex","meshScale","debug","model","material","scale","metalness","roughness","opacity","color","gridPosition","cameraPosition","pointColorIndex","primary","hovered","active","pointLight","position","intensity","distance","bloom","kernelSize","luminanceThreshold","luminanceSmoothing","glitch","delay","duration","strength","lights","front","left","right","brandPalette","ciano","magenta","white","black","assetURL","path","concat","process","prefix","Canary","props","initialPosition","canJump","undefined","canMove","_useState","useState","_useState2","Object","slicedToArray","setPosition","_useState3","_useState4","isJumping","setIsJumping","audioTracks","jump","useRef","move","footstep1","footstep2","main","playTrack","track","current","pause","currentTime","play","animation","speed","reversed","glb","_useGLTF","useGLTF","scene","nodes","materials","animations","animationRef","meshRef","useEffect","handleCanaryRef","Audio","values","forEach","audioTrack","load","removeAttribute","rotation","x","Math","PI","THREE","clip","action","clipAction","timeScale","stopAllAction","handleKeyDown","event","key","prevPosition","preventDefault","window","addEventListener","removeEventListener","useFrame","_","delta","update","newY","max","useLayoutEffect","canary","set","traverse","obj","type","receiveShadow","castShadow","assign","wireframe","moughness","react_default","a","createElement","ref","object","Lights","_ref","config","groupL","groupR","lightL","lightR","lightF","state","t","clock","getElapsedTime","currentPosition","parseInt","random","sin","y","cos","z","useHelper","Fragment","GameOverScreen","handleKeyPress","location","reload","document","react_three_fiber_esm","shadows","dpr","camera","fov","performance","min","Lights_Lights","Canary_Canary","OrbitControls","minPolarAngle","maxPolarAngle","ReactDOM","createPortal","OverlayContainer","Title","Subtitle","body","blinkAnimation","keyframes","_templateObject","taggedTemplateLiteral","styled","div","_templateObject2","h1","_templateObject3","h2","_templateObject4","CameraController","_useThree","useThree","is2D","setIs2D","perspCamera","toggleCamera","code","lookAt","updateProjectionMatrix","cleanUp","objectsToRemove","push","remove","geometry","dispose","Obstacle","positionZ","side","video","handleObstacleRef","videoRef","textureRef","obstacleRef","VideoTexture","needsUpdate","args","map","Obstacles","React","forwardRef","_ref2","canaryRef","videos","handleGameOver","obstacles","setObstacles","clockRef","elapsedTime","obstacleIdentifier","prevObstacles","obstacle","objectSpread","playerBox","Box3","setFromObject","center","size","getCenter","getSize","multiplyScalar","rotatedSize","scaledRotatedPlayerBox","setFromCenterAndSize","collisionDetected","obstacleBox","intersectsBox","filter","length","newObstacle","floor","toConsumableArray","_ref3","index","Obstacles_Obstacle","SideSegment","positionX","PathSegment","Path","playerRef","segments","setSegments","gamePosition","setGamePosition","lastSegmentRef","prevSegments","segment","lastSegmentZ","newSegmentZ","slice","Game","setCanaryRef","isGameOver","setIsGameOver","_useState5","_useState6","score","setScore","startTimeRef","now","interval","setInterval","clearInterval","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","Promise","all","faceapi","faceExpressionNet","loadFromUri","faceRecognitionNet","ssdMobilenetv1","tinyFaceDetector","mtcnn","faceLandmark68Net","faceLandmark68TinyNet","ageGenderNet","stop","apply","this","arguments","loadModels","GameOverScreen_GameOverScreen","enableZoom","enableRotate","ScoreContainer","Score","Game_templateObject","Game_templateObject2","ProgressBar","progress","ProgressBarContainer","Progress","ProgressBar_templateObject","ProgressBar_templateObject2","WebcamContext","createContext","WebcamProvider","children","Provider","value","StartScreen","showStartScreen","setShowStartScreen","showSelectMode","setShowSelectedMode","videoWidth","captureVideo","setCaptureVideo","isTouchDevice","navigator","maxTouchPoints","handleTouch","handleGameMode","gameMode","mediaDevices","getUserMedia","width","then","stream","srcObject","catch","err","console","error","_usePreloadedVideos","numberOfVideos","setVideos","loadingProgress","setLoadingProgress","cleanupFunctions","selectedFilenames","allFilenames","i","randomIndex","videoElements","filename","videoObj","src","videoElement","loaded","preload","muted","loop","playbackRate","setAttribute","onCanPlayThrough","loadedVideosCount","v","cleanup","usePreloadedVideos","StartScreen_OverlayContainer","StartScreen_Title","ProgressBar_ProgressBar","GameContext_WebcamProvider","id","height","onPlay","_callee2","detections","_context2","withFaceLandmarks","withFaceExpressions","sent","expressions","angry","dispatchEvent","KeyboardEvent","surprised","happy","role","aria-label","StartScreen_Subtitle","ControllerOption","onClick","AnimatedSubtitle","react","fallback","Game_Game","StartScreen_templateObject","StartScreen_templateObject2","StartScreen_templateObject3","StartScreen_templateObject4","_templateObject5","_templateObject6","StyledApp","src_templateObject","App","StartScreen_StartScreen","rootElement","getElementById","createRoot","render","src_App"],"mappings":"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","file":"static/js/main.6e0844f1.chunk.js","sourcesContent":["const canaryConfig = {\n  objectUrl: {\n    hop: 'canary_hop.glb',\n    idle: 'canary_idle.glb',\n    walk: 'canary_walk.glb'\n  },\n  nodeCoords: 'canary.geometry.attributes.position',\n  nodeSigns: [1, -1, -1],\n  nodeScale: 2.5,\n  nodeGroupScale: 0.02,\n  meshColorIndex: 'ciano',\n  meshScale: 1,\n  debug: false,\n  model: {\n    material: 'Default_OBJ',\n    scale: 0.02,\n    metalness: 0.2,\n    roughness: 2,\n    opacity: 1,\n    color: 'white'\n  },\n  gridPosition: [0, -0.52, 0.28],\n  cameraPosition: [-20, 0, 0],\n  pointColorIndex: {\n    primary: 'ciano',\n    hovered: 'magenta',\n    active: 'magenta'\n  },\n  pointLight: {\n    position: [0, 0, 0],\n    intensity: [2, 2, 2],\n    distance: 15,\n    color: ['ciano', 'magenta', 'magenta']\n  },\n  bloom: {\n    kernelSize: 1,\n    luminanceThreshold: 0.1,\n    luminanceSmoothing: 0.05,\n    intensity: 0.1\n  },\n  glitch: {\n    delay: [20, 30],\n    duration: [0.3, 0.5],\n    strength: [0.1, 0.3]\n  },\n  lights: {\n    front: {\n      color: 'ciano'\n    },\n    left: {\n      color: 'white'\n    },\n    right: {\n      color: 'magenta'\n    }\n  }\n}\n\nconst brandPalette = {\n  ciano: '#01ffff',\n  magenta: '#e6007a',\n  white: '#ffffff',\n  black: '#000000'\n}\n\nexport { brandPalette, canaryConfig }\n","function assetURL(path) {\n  const publicUrl = process.env.PUBLIC_URL\n\n  const isDevelopment = process.env.NODE_ENV === 'development'\n  const isRoot = publicUrl === '/'\n\n  const assetPrefix = isDevelopment || isRoot ? '' : process.env.PUBLIC_URL\n\n  return `${assetPrefix}/assets/${path}`\n}\n\nfunction prefix(path) {\n  const publicUrl = process.env.PUBLIC_URL\n\n  const isDevelopment = process.env.NODE_ENV === 'development'\n  const isRoot = publicUrl === '/'\n\n  const assetPrefix = isDevelopment || isRoot ? '' : process.env.PUBLIC_URL\n\n  return `${assetPrefix}/${path}`\n}\n\nexport { assetURL, prefix }\n","import { useGLTF } from '@react-three/drei'\nimport { useFrame } from '@react-three/fiber'\nimport React, { useState, useRef, useEffect, useLayoutEffect } from 'react'\nimport * as THREE from 'three'\nimport { brandPalette, canaryConfig } from '../config'\nimport { assetURL } from '../helpers/url'\n\nconst Canary = props => {\n  const initialPosition = props.position ? props.position : [0, 0, 0]\n  const canJump = props.canJump !== undefined ? props.canJump : true\n  const canMove = props.canMove !== undefined ? props.canMove : true\n\n  const [position, setPosition] = useState(initialPosition)\n  const [isJumping, setIsJumping] = useState(false)\n\n  const audioTracks = {\n    jump: useRef(null),\n    move: useRef(null),\n    footstep1: useRef(null),\n    footstep2: useRef(null),\n    main: useRef(null)\n  }\n\n  const playTrack = track => {\n    if (track.current) {\n      track.current.pause()\n      track.current.currentTime = 0\n      track.current.play()\n    }\n  }\n\n  let animation = props.animation\n  let speed = props.speed\n  let reversed = props.reversed\n\n  if (props.animation === 'dead') {\n    animation = 'idle'\n    speed = 0\n    reversed = true\n  }\n\n  const glb = canaryConfig.objectUrl[animation]\n  const { scene, nodes, materials, animations } = useGLTF(assetURL(glb))\n\n  const animationRef = useRef()\n  const meshRef = useRef()\n\n  useEffect(() => {\n    if (props.handleCanaryRef) {\n      props.handleCanaryRef(meshRef)\n    }\n  }, [meshRef])\n\n  useEffect(() => {\n    audioTracks.jump.current = new Audio(assetURL('audio/canary_jump.mp3'))\n    audioTracks.move.current = new Audio(assetURL('audio/canary_swooshleftandright.mp3'))\n    audioTracks.footstep1.current = new Audio(assetURL('audio/canary_footstep1.mp3'))\n    audioTracks.footstep2.current = new Audio(assetURL('audio/canary_footstep2.mp3'))\n    audioTracks.main.current = new Audio(assetURL('audio/canary_in_a_meme_mine.mp3'))\n\n    Object.values(audioTracks).forEach(audioTrack => {\n      if (audioTrack.current) {\n        audioTrack.current.load()\n      }\n    })\n    return () => {\n      Object.values(audioTracks).forEach(audioTrack => {\n        if (audioTrack.current) {\n          audioTrack.current.pause()\n          audioTrack.current.removeAttribute('src')\n          audioTrack.current.load()\n        }\n      })\n    }\n  }, [])\n\n  useEffect(() => {\n    if (meshRef.current && reversed) {\n      meshRef.current.rotation.x = Math.PI / 0.85\n    }\n  }, [])\n\n  useEffect(() => {\n    if (meshRef && meshRef.current) {\n      animationRef.current = new THREE.AnimationMixer(meshRef.current)\n    }\n  }, [animation, meshRef])\n\n  useEffect(() => {\n    if (animationRef.current && animations) {\n      animations.forEach(clip => {\n        const action = animationRef.current.clipAction(clip)\n        action.timeScale = speed\n        action.play()\n      })\n    }\n\n    // it means the game started\n    if (props.speed === 3) {\n      playTrack(audioTracks.main)\n    }\n\n    return () => {\n      if (animationRef.current) {\n        animationRef.current.stopAllAction()\n      }\n    }\n  }, [animations])\n\n  useEffect(() => {\n    playTrack(audioTracks.move)\n  }, [position[0]])\n\n  useEffect(() => {\n    const handleKeyDown = event => {\n      if (canMove) {\n        if (event.key === 'ArrowRight') {\n          setPosition(prevPosition => {\n            if (prevPosition[0] !== -1) return [prevPosition[0] - 1, prevPosition[1], prevPosition[2]]\n            else return prevPosition\n          })\n        } else if (event.key === 'ArrowLeft') {\n          setPosition(prevPosition => {\n            if (prevPosition[0] !== 1) return [prevPosition[0] + 1, prevPosition[1], prevPosition[2]]\n            else return prevPosition\n          })\n        }\n      }\n      if (canJump) {\n        if (event.key === 'ArrowUp' && !isJumping && position[1] === 0) {\n          setIsJumping(true)\n          playTrack(audioTracks.jump)\n        }\n      }\n      if (event.key === 'ArrowDown') {\n        event.preventDefault()\n      }\n    }\n\n    window.addEventListener('keydown', handleKeyDown)\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown)\n    }\n  }, [canMove, canJump, position])\n\n  useFrame((_, delta) => {\n    if (animationRef.current) {\n      animationRef.current.update(delta)\n    }\n\n    if (isJumping) {\n      // Simple jump animation: move up then down\n      setPosition(prevPosition => {\n        const newY = prevPosition[1] + delta * 5\n        // Check if the model has reached the peak of the jump\n        if (newY >= 2) {\n          setIsJumping(false) // Start falling\n        }\n        return [prevPosition[0], newY <= 0 ? 0 : newY, prevPosition[2]] // Reset Y position after jump\n      })\n    } else {\n      // Bring the model back down if it's in the air\n      setPosition(prevPosition => {\n        if (prevPosition[1] !== 0) return [prevPosition[0], Math.max(0, prevPosition[1] - delta * 10), prevPosition[2]]\n        else return prevPosition\n      })\n    }\n  })\n\n  useLayoutEffect(() => {\n    if (props.meshScale) {\n      if (nodes.canary) {\n        nodes.canary.scale.set(4, 4, 4)\n      }\n    }\n\n    scene.traverse(obj => {\n      obj.type === 'Mesh' && (obj.receiveShadow = obj.castShadow = true)\n    })\n\n    Object.assign(materials[props.model.material], {\n      wireframe: false,\n      metalness: props.model.metalness,\n      roughness: props.model.moughness,\n      opacity: props.model.opacity,\n      color: new THREE.Color(brandPalette[props.model.color])\n    })\n  }, [scene, nodes, materials])\n\n  return (\n    <mesh position={position} ref={meshRef}>\n      <primitive object={scene} {...props} />\n    </mesh>\n  )\n}\n\nexport { Canary }\n","/* eslint-disable react/no-unknown-property */\n/* eslint-disable react/prop-types */\nimport { useHelper } from '@react-three/drei'\nimport { useFrame } from '@react-three/fiber'\nimport React, { useRef } from 'react'\nimport * as THREE from 'three'\nimport { brandPalette } from '../config'\n\nconst Lights = ({ config }) => {\n  const groupL = useRef()\n  const groupR = useRef()\n  const front = useRef()\n  const lightL = useRef()\n  const lightR = useRef()\n  const lightF = useRef()\n\n  useFrame(state => {\n    const t = state.clock.getElapsedTime()\n\n    // storm effect\n    let currentPosition = 15\n    if (parseInt(t) % 4 === 1) {\n      currentPosition = (Math.random() * 15) | 0\n    }\n\n    groupL.current.position.x = (Math.sin(t) / 4) * currentPosition\n    groupL.current.position.y = (Math.cos(t) / 4) * currentPosition\n    groupL.current.position.z = (Math.cos(t) / 4) * currentPosition\n\n    groupR.current.position.x = (Math.cos(t) / 4) * 10\n    groupR.current.position.y = (Math.sin(t) / 4) * 10\n    groupR.current.position.z = (Math.sin(t) / 4) * 10\n\n    front.current.position.x = (Math.sin(t) / 4) * 10\n    front.current.position.y = (Math.cos(t) / 4) * 10\n    front.current.position.z = (Math.sin(t) / 4) * 10\n  })\n\n  if (config.debug === true) {\n    useHelper(lightL, THREE.PointLightHelper)\n    useHelper(lightR, THREE.PointLightHelper)\n    useHelper(lightF, THREE.PointLightHelper)\n  }\n\n  return (\n    <>\n      <group ref={groupL}>\n        <pointLight\n          ref={lightL}\n          color={brandPalette[config.pointLight.color[0]]}\n          position={config.pointLight.position}\n          distance={config.pointLight.distance}\n          intensity={config.pointLight.intensity[0]}\n        />\n      </group>\n      <group ref={groupR}>\n        <pointLight\n          ref={lightR}\n          color={brandPalette[config.pointLight.color[1]]}\n          position={config.pointLight.position}\n          distance={config.pointLight.distance}\n          intensity={config.pointLight.intensity[1]}\n        />\n      </group>\n      <group ref={front}>\n        <pointLight\n          ref={lightF}\n          color={brandPalette[config.pointLight.color[2]]}\n          position={config.pointLight.position}\n          distance={config.pointLight.distance}\n          intensity={config.pointLight.intensity[2]}\n        />\n      </group>\n    </>\n  )\n}\n\nexport { Lights }\n","import { OrbitControls } from '@react-three/drei'\nimport { Canvas } from '@react-three/fiber'\nimport React, { useEffect } from 'react'\nimport ReactDOM from 'react-dom'\nimport styled, { keyframes } from 'styled-components'\nimport { Canary } from '../components/Canary'\nimport { Lights } from '../components/Lights'\nimport { canaryConfig as config } from '../config'\n\nconst GameOverScreen = () => {\n  useEffect(() => {\n    const handleKeyPress = event => {\n      if (event.key === 'Enter') {\n        window.location.reload()\n      }\n    }\n\n    document.addEventListener('keydown', handleKeyPress)\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyPress)\n    }\n  }, [])\n\n  return (\n    <>\n      <Canvas shadows dpr={[1, 2]} camera={{ position: [3, 1, 0], fov: 50 }} performance={{ min: 0.1 }}>\n        <Lights config={config} />\n\n        <Canary\n          animation=\"dead\"\n          canMove={false}\n          canJump={false}\n          position={[0, 0.2, 0]}\n          scale={config.model.scale}\n          meshColorIndex={config.meshColorIndex}\n          meshScale={config.meshScale}\n          model={config.model}\n        />\n\n        <OrbitControls minPolarAngle={Math.PI / 2.8} maxPolarAngle={Math.PI / 1.8} />\n      </Canvas>\n      {ReactDOM.createPortal(\n        <OverlayContainer>\n          <Title>GAME OVER</Title>\n          <Subtitle>press enter to restart</Subtitle>\n        </OverlayContainer>,\n        document.body\n      )}\n    </>\n  )\n}\n\nconst blinkAnimation = keyframes`\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0; }\n`\n\nconst OverlayContainer = styled.div`\n  position: absolute;\n  top: 25px;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  pointer-events: none;\n`\n\nconst Title = styled.h1`\n  color: #fff;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n`\n\nconst Subtitle = styled.h2`\n  color: #fff;\n  margin-top: 125px;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n  animation: ${blinkAnimation} 1500ms linear infinite;\n`\n\nexport { GameOverScreen }\n","import { useThree, useFrame } from '@react-three/fiber'\nimport { useState, useEffect } from 'react'\nimport * as THREE from 'three'\n\nfunction CameraController() {\n  const { camera, set } = useThree()\n  const [is2D, setIs2D] = useState(false)\n  const perspCamera = new THREE.PerspectiveCamera(50, 16 / 9, 0.1, 1000)\n\n  useEffect(() => {\n    const toggleCamera = event => {\n      if (event.code === 'Space') {\n        setIs2D(!is2D)\n      }\n    }\n\n    window.addEventListener('keydown', toggleCamera)\n\n    return () => {\n      window.removeEventListener('keydown', toggleCamera)\n    }\n  }, [is2D])\n\n  useEffect(() => {\n    if (is2D) {\n      perspCamera.position.set(-20, 0, 0)\n      perspCamera.lookAt(20, 0, 0)\n      set({ camera: perspCamera })\n    } else {\n      perspCamera.position.set(0, 0.8, -3)\n      perspCamera.lookAt(0, 0, 0)\n      set({ camera: perspCamera })\n    }\n  }, [is2D])\n\n  useFrame(() => {\n    camera.lookAt(-100, 200, 500)\n    camera.updateProjectionMatrix()\n  })\n\n  return null\n}\n\nexport { CameraController }\n","function cleanUp(scene) {\n  const objectsToRemove = []\n\n  scene.traverse(object => {\n    if (object.position.z <= -50) {\n      objectsToRemove.push(object)\n    }\n  })\n\n  objectsToRemove.forEach(object => {\n    scene.remove(object)\n\n    if (object.geometry) {\n      object.geometry.dispose()\n    }\n    if (object.material) {\n      object.material.dispose()\n    }\n  })\n}\n\nexport { cleanUp }\n","import { useFrame, useThree } from '@react-three/fiber'\nimport React, { useEffect, useState, useRef } from 'react'\nimport * as THREE from 'three'\nimport { Box3, VideoTexture } from 'three'\nimport { cleanUp } from '../helpers/clean'\n\nconst random = (min, max) => Math.floor(Math.random() * (max - min)) + min\n\nconst Obstacle = ({ positionZ, side, video, handleObstacleRef }) => {\n  const videoRef = useRef()\n  const textureRef = useRef()\n  const obstacleRef = useRef()\n\n  useEffect(() => {\n    video.play()\n    videoRef.current = video\n    textureRef.current = new VideoTexture(video)\n  }, [])\n\n  useEffect(() => {\n    handleObstacleRef(positionZ, obstacleRef)\n  }, [positionZ])\n\n  useFrame(() => {\n    if (textureRef.current) {\n      textureRef.current.needsUpdate = true\n    }\n  })\n\n  return (\n    <mesh position={[side, 0, positionZ]} rotation={[0, 0, 0]} ref={obstacleRef}>\n      <circleGeometry args={[0.6, 32]} />\n      <meshBasicMaterial map={textureRef.current} side={THREE.DoubleSide} />\n    </mesh>\n  )\n}\n\nconst Obstacles = React.forwardRef(({ videos, handleGameOver }, canaryRef) => {\n  const [obstacles, setObstacles] = useState([])\n\n  const visibleObstacles = 5\n  const clockRef = useRef({ elapsedTime: 0, delta: 0 })\n\n  const handleObstacleRef = (obstacleIdentifier, ref) => {\n    setObstacles(prevObstacles => {\n      return prevObstacles.map(obstacle => {\n        if (obstacle.z === obstacleIdentifier) {\n          if (ref.current) {\n            return { ...obstacle, ref }\n          }\n        }\n        return obstacle\n      })\n    })\n  }\n\n  useFrame(state => {\n    const { clock } = state\n    clockRef.current.delta = clock.getElapsedTime() - clockRef.current.elapsedTime\n\n    if (canaryRef && canaryRef.current) {\n      const playerBox = new Box3().setFromObject(canaryRef.current)\n\n      // Transform the original bounding box to match the model inside\n      const scaleFactor = 0.23\n      const center = new THREE.Vector3()\n      const size = new THREE.Vector3()\n      playerBox.getCenter(center)\n      playerBox.getSize(size)\n\n      // Scale the size\n      size.multiplyScalar(scaleFactor)\n      const rotatedSize = new THREE.Vector3(size.x, size.z, size.y)\n      const scaledRotatedPlayerBox = new THREE.Box3()\n      scaledRotatedPlayerBox.setFromCenterAndSize(center, rotatedSize)\n\n      let collisionDetected = false\n      obstacles.forEach(obstacle => {\n        if (obstacle.ref && obstacle.ref.current) {\n          const obstacleBox = new Box3().setFromObject(obstacle.ref.current)\n          if (scaledRotatedPlayerBox && obstacleBox) {\n            collisionDetected = scaledRotatedPlayerBox.intersectsBox(obstacleBox)\n          }\n        }\n        if (collisionDetected) {\n          handleGameOver(true)\n        }\n      })\n    }\n  })\n\n  const { scene } = useThree()\n\n  useFrame(state => {\n    const { clock } = state\n    clockRef.current.delta = clock.getElapsedTime() - clockRef.current.elapsedTime\n\n    if (canaryRef && canaryRef.current) {\n      // Move obstacles and clean up old ones\n      if (clockRef.current.delta >= 0.1) {\n        clockRef.current.elapsedTime = clock.getElapsedTime()\n        setObstacles(\n          prevObstacles =>\n            prevObstacles\n              .map(obstacle => ({\n                ...obstacle,\n                z: obstacle.z - 1\n              }))\n              .filter(obstacle => obstacle.z >= -10) // -10 is the screen limit\n        )\n        cleanUp(scene)\n      }\n\n      // Create new obstacles\n      if (obstacles.length < visibleObstacles) {\n        const initialPosition = 0\n        const obstacleGap = random(20, 120)\n        const obstacleside = Math.floor(Math.random() * 3) - 1\n\n        const newObstacle = {\n          z: initialPosition + obstacleGap,\n          side: obstacleside,\n          ref: null\n        }\n\n        setObstacles(prevObstacles => [...prevObstacles, newObstacle])\n      }\n    }\n  })\n\n  return (\n    <>\n      {obstacles.map(({ z, side }, index) => {\n        return (\n          <Obstacle\n            key={index}\n            positionZ={z}\n            side={side}\n            video={videos[Math.floor(Math.random() * videos.length)]}\n            handleObstacleRef={handleObstacleRef}\n          />\n        )\n      })}\n    </>\n  )\n})\n\nexport { Obstacles }\n","import { useFrame, useThree } from '@react-three/fiber'\nimport React, { useState, useRef } from 'react'\nimport * as THREE from 'three'\nimport { cleanUp } from '../helpers/clean'\n\nconst SideSegment = React.forwardRef(({ positionZ, side }, ref) => {\n  const positionX = side === 'left' ? -1.5 : 1.5\n\n  return (\n    <mesh position={[positionX, 0, positionZ]} rotation={[Math.PI / 2, 0, 0]} ref={ref}>\n      <planeGeometry args={[0.1, 1000]} />\n      <meshBasicMaterial color={0xffffff} side={THREE.DoubleSide} />\n    </mesh>\n  )\n})\n\nconst PathSegment = React.forwardRef(({ positionZ }, ref) => {\n  return (\n    <mesh position={[0, -0.52, positionZ]} rotation={[Math.PI / 2, 0, 0]} ref={ref}>\n      <planeGeometry args={[0.1, 5]} />\n      <meshBasicMaterial color={0xffffff} side={THREE.DoubleSide} />\n    </mesh>\n  )\n})\n\nconst Path = React.forwardRef((_, playerRef) => {\n  const [segments, setSegments] = useState([])\n  const [gamePosition, setGamePosition] = useState(0)\n\n  const visibleSegments = 5\n  const lastSegmentRef = useRef()\n  const clockRef = useRef({ elapsedTime: 0, delta: 0 })\n\n  const { scene } = useThree()\n\n  useFrame(state => {\n    const { clock } = state\n    clockRef.current.delta = clock.getElapsedTime() - clockRef.current.elapsedTime\n\n    if (playerRef && playerRef.current) {\n      if (clockRef.current.delta >= 0.05) {\n        clockRef.current.elapsedTime = clock.getElapsedTime()\n        setGamePosition(gamePosition => gamePosition + 1)\n        setSegments(prevSegments => prevSegments.map(segment => segment - 1))\n      }\n\n      const lastSegmentZ = lastSegmentRef.current ? lastSegmentRef.current.position.z : 0\n\n      // Generate new segments if needed\n      if (segments.length < visibleSegments || gamePosition % visibleSegments > lastSegmentZ) {\n        const segmentGap = 20\n        const newSegmentZ = lastSegmentZ + segmentGap\n        setSegments(prevSegments => [...prevSegments, newSegmentZ])\n      }\n\n      // Remove segments that are far behind the player\n      if (segments.length > visibleSegments) {\n        setSegments(prevSegments => prevSegments.slice(1))\n        cleanUp(scene)\n      }\n    }\n  })\n\n  return (\n    <>\n      {segments.map((z, index) => (\n        <React.Fragment key={index}>\n          <PathSegment positionZ={z} ref={index === segments.length - 1 ? lastSegmentRef : undefined} />\n          <SideSegment positionZ={z} side=\"left\" />\n          <SideSegment positionZ={z} side=\"right\" />\n        </React.Fragment>\n      ))}\n    </>\n  )\n})\n\nexport { Path }\n","import { OrbitControls } from '@react-three/drei'\nimport { Canvas } from '@react-three/fiber'\nimport * as faceapi from 'face-api.js'\nimport React, { useEffect, useRef, useState } from 'react'\nimport ReactDOM from 'react-dom'\nimport styled from 'styled-components'\nimport { GameOverScreen } from './GameOverScreen'\nimport { CameraController } from '../components/CameraController'\nimport { Canary } from '../components/Canary'\nimport { Lights } from '../components/Lights'\nimport { Obstacles } from '../components/Obstacles'\nimport { Path } from '../components/Path'\nimport { canaryConfig as config } from '../config'\nimport { prefix } from '../helpers/url'\n\nconst Game = ({ videos }) => {\n  const [canaryRef, setCanaryRef] = useState(null)\n  const [isGameOver, setIsGameOver] = useState(false)\n  const [score, setScore] = useState(0)\n  const startTimeRef = useRef(performance.now())\n\n  const handleCanaryRef = ref => {\n    if (ref.current) {\n      setCanaryRef(ref)\n    }\n  }\n\n  const handleGameOver = isGameOver => setIsGameOver(isGameOver)\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (startTimeRef) {\n        setScore(parseInt((performance.now() - startTimeRef.current) / 100))\n      }\n    }, 10)\n\n    return () => clearInterval(interval)\n  }, [])\n\n  useEffect(() => {\n    const loadModels = async () => {\n      Promise.all([\n        faceapi.nets.faceExpressionNet.loadFromUri(prefix('/models')),\n        faceapi.nets.faceRecognitionNet.loadFromUri(prefix('/models')),\n        faceapi.nets.ssdMobilenetv1.loadFromUri(prefix('/models')),\n        faceapi.nets.tinyFaceDetector.loadFromUri(prefix('/models')),\n        faceapi.nets.mtcnn.loadFromUri(prefix('/models')),\n        faceapi.nets.faceLandmark68Net.loadFromUri(prefix('/models')),\n        faceapi.nets.faceLandmark68TinyNet.loadFromUri(prefix('/models')),\n        faceapi.nets.ageGenderNet.loadFromUri(prefix('/models'))\n      ])\n    }\n    loadModels()\n  }, [])\n\n  return isGameOver ? (\n    <GameOverScreen />\n  ) : (\n    <>\n      <Canvas shadows dpr={[1, 2]} camera={{ position: config.cameraPosition, fov: 50 }} performance={{ min: 0.1 }}>\n        <CameraController />\n\n        <Lights config={config} />\n\n        <Path ref={canaryRef} />\n\n        <Obstacles videos={videos} handleGameOver={handleGameOver} ref={canaryRef} />\n\n        <Canary\n          animation=\"walk\"\n          speed={3}\n          scale={config.model.scale}\n          meshColorIndex={config.meshColorIndex}\n          meshScale={config.meshScale}\n          model={config.model}\n          handleCanaryRef={handleCanaryRef}\n        />\n\n        <OrbitControls\n          minPolarAngle={Math.PI / 2.8}\n          maxPolarAngle={Math.PI / 1.8}\n          enableZoom={false}\n          enableRotate={false}\n        />\n      </Canvas>\n      {ReactDOM.createPortal(\n        <ScoreContainer>\n          <Score>Score: {score}</Score>\n        </ScoreContainer>,\n        document.body\n      )}\n    </>\n  )\n}\n\nconst ScoreContainer = styled.div`\n  position: absolute;\n  top: 25px;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  pointer-events: none;\n`\n\nconst Score = styled.h1`\n  color: #fff;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n`\n\nexport { Game }\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst ProgressBar = ({ progress }) => (\n  <ProgressBarContainer>\n    <Progress progress={progress} />\n  </ProgressBarContainer>\n)\n\nconst ProgressBarContainer = styled.div`\n  width: 15vw;\n  background-color: #ddd;\n  border: 2px solid #666;\n  border-radius: 20px;\n  overflow: hidden;\n`\n\nconst Progress = styled.div`\n  height: 20px;\n  width: ${props => props.progress}%;\n  background-color: #e6007a;\n  transition: width 0.5s ease-in-out;\n`\n\nexport { ProgressBar }\n","import React, { createContext, useContext } from 'react'\n\nconst WebcamContext = createContext()\n\nexport const WebcamProvider = ({ children }) => {\n  return <WebcamContext.Provider value={{}}>{children}</WebcamContext.Provider>\n}\n\nexport const useWebcam = () => useContext(WebcamContext)\n","import { OrbitControls } from '@react-three/drei'\nimport { Canvas } from '@react-three/fiber'\nimport * as faceapi from 'face-api.js'\nimport React, { useState, useEffect, useRef, Suspense } from 'react'\nimport ReactDOM from 'react-dom'\nimport styled, { keyframes } from 'styled-components'\nimport { Game } from './Game'\nimport { Canary } from '../components/Canary'\nimport { Lights } from '../components/Lights'\nimport { ProgressBar } from '../components/ProgressBar'\nimport { usePreloadedVideos } from '../components/Videos'\nimport { canaryConfig as config } from '../config'\nimport { WebcamProvider } from '../context/GameContext'\nimport { prefix } from '../helpers/url'\n\nconst StartScreen = () => {\n  const [showStartScreen, setShowStartScreen] = useState(true)\n  const [showSelectMode, setShowSelectedMode] = useState(true)\n  const videoRef = useRef()\n  const videoWidth = 320\n  const videoHeight = 240\n  const [captureVideo, setCaptureVideo] = useState(false)\n\n  const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0\n\n  useEffect(() => {\n    if (showSelectMode) {\n      return\n    }\n\n    const handleKeyPress = event => {\n      if (event.key === 'Enter') {\n        setShowStartScreen(false)\n      }\n    }\n\n    const handleTouch = event => {\n      if (event.type === 'touchstart') {\n        setShowStartScreen(false)\n      }\n    }\n\n    document.addEventListener('keydown', handleKeyPress)\n\n    if (isTouchDevice) {\n      document.addEventListener('touchstart', handleTouch)\n    }\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyPress)\n      if (isTouchDevice) {\n        document.addEventListener('touchstart', handleTouch)\n      }\n    }\n  }, [showSelectMode, setShowSelectedMode])\n\n  useEffect(() => {\n    const loadModels = async () => {\n      Promise.all([\n        faceapi.nets.faceExpressionNet.loadFromUri(prefix('/models')),\n        faceapi.nets.faceRecognitionNet.loadFromUri(prefix('/models')),\n        faceapi.nets.ssdMobilenetv1.loadFromUri(prefix('/models')),\n        faceapi.nets.tinyFaceDetector.loadFromUri(prefix('/models')),\n        faceapi.nets.mtcnn.loadFromUri(prefix('/models')),\n        faceapi.nets.faceLandmark68Net.loadFromUri(prefix('/models')),\n        faceapi.nets.faceLandmark68TinyNet.loadFromUri(prefix('/models')),\n        faceapi.nets.ageGenderNet.loadFromUri(prefix('/models'))\n      ])\n    }\n    loadModels()\n  }, [])\n\n  const handleGameMode = gameMode => {\n    if (gameMode === 'webcam') {\n      startVideo()\n    }\n    setShowSelectedMode(false)\n  }\n\n  function startVideo() {\n    setCaptureVideo(true)\n\n    navigator.mediaDevices\n      .getUserMedia({ video: { width: videoWidth } })\n      .then(stream => {\n        if (videoRef.current) {\n          let video = videoRef.current\n          video.srcObject = stream\n          video.play()\n        }\n      })\n      .catch(err => {\n        console.error(err)\n      })\n  }\n\n  function handleVideoOnPlay() {\n    setInterval(async () => {\n      if (videoRef) {\n        const detections = await faceapi\n          .detectSingleFace(videoRef.current, new faceapi.TinyFaceDetectorOptions())\n          .withFaceLandmarks()\n          .withFaceExpressions()\n        if (detections) {\n          if (detections.expressions.angry > 0.5) {\n            window.dispatchEvent(new KeyboardEvent('keydown', { key: 'ArrowLeft' }))\n          }\n\n          if (detections.expressions.surprised > 0.5) {\n            window.dispatchEvent(new KeyboardEvent('keydown', { key: 'ArrowRight' }))\n          }\n\n          if (detections.expressions.happy > 0.6) {\n            window.dispatchEvent(new KeyboardEvent('keydown', { key: 'ArrowUp' }))\n          }\n        }\n      }\n    }, 100)\n  }\n\n  const numberOfVideos = 32\n  const { videos, loadingProgress } = usePreloadedVideos(numberOfVideos)\n\n  if (videos.length < numberOfVideos) {\n    return (\n      <OverlayContainer>\n        <Title>loading...</Title>\n        <ProgressBar progress={loadingProgress} />\n      </OverlayContainer>\n    )\n  }\n\n  return (\n    <WebcamProvider>\n      {captureVideo && (\n        <div id=\"webcam_holder\">\n          <video id=\"webcam\" ref={videoRef} height={videoHeight} width={videoWidth} onPlay={handleVideoOnPlay} />\n          <p>\n            <span role=\"img\" aria-label=\"angry face\">\n              😬😠 (angry) to move left\n            </span>\n            <br />\n            <span role=\"img\" aria-label=\"surprised face\">\n              😲 (surprised) to move right\n            </span>\n            <br />\n            <span role=\"img\" aria-label=\"happy face\">\n              😆 (happy) to jump!\n            </span>\n          </p>\n        </div>\n      )}\n\n      {showStartScreen ? (\n        <>\n          <Canvas shadows dpr={[1, 2]} camera={{ position: [3, 1, 3], fov: 50 }} performance={{ min: 0.1 }}>\n            <Lights config={config} />\n\n            <Canary\n              animation={showSelectMode ? 'idle' : 'walk'}\n              speed={1}\n              position={[0, 0.2, 0]}\n              scale={config.model.scale}\n              meshColorIndex={config.meshColorIndex}\n              meshScale={config.meshScale}\n              model={config.model}\n            />\n\n            <OrbitControls minPolarAngle={Math.PI / 2.8} maxPolarAngle={Math.PI / 1.8} />\n          </Canvas>\n          {ReactDOM.createPortal(\n            showSelectMode ? (\n              <OverlayContainer>\n                <Title>canary in a meme mine</Title>\n                <Subtitle>select game mode:</Subtitle>\n                <ControllerOption onClick={() => handleGameMode('keyboard')}>\n                  <span role=\"img\" aria-label=\"keyboard\">\n                    ⌨️ keyboard\n                  </span>\n                </ControllerOption>\n                <ControllerOption onClick={() => handleGameMode('webcam')}>\n                  <span role=\"img\" aria-label=\"webcam\">\n                    📷 webcam\n                  </span>\n                </ControllerOption>\n              </OverlayContainer>\n            ) : (\n              <OverlayContainer>\n                <Title>canary in a meme mine</Title>\n                <AnimatedSubtitle>get ready and press enter to start</AnimatedSubtitle>\n              </OverlayContainer>\n            ),\n            document.body\n          )}\n        </>\n      ) : (\n        <Suspense fallback={null}>\n          <Game videos={videos} />\n        </Suspense>\n      )}\n    </WebcamProvider>\n  )\n}\n\nconst blinkAnimation = keyframes`\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0; }\n`\n\nconst OverlayContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`\n\nconst Title = styled.h1`\n  margin: 0;\n  color: #fff;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n`\nconst Subtitle = styled.h2`\n  color: #fff;\n  margin-top: 300px;\n  margin-bottom: 5px;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n`\n\nconst AnimatedSubtitle = styled.h2`\n  color: #fff;\n  margin-top: 125px;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n  animation: ${blinkAnimation} 1500ms linear infinite;\n`\nconst ControllerOption = styled.h2`\n  margin: 5px;\n  color: #fff;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n  cursor: pointer;\n\n  &:hover {\n    color: #e6007a;\n  }\n`\n\nexport { StartScreen }\n","import { useEffect, useState } from 'react'\nimport { assetURL } from '../helpers/url'\n\nfunction usePreloadedVideos(numberOfVideos) {\n  const [videos, setVideos] = useState([])\n  const [loadingProgress, setLoadingProgress] = useState(0)\n\n  useEffect(() => {\n    const cleanupFunctions = []\n    const selectedFilenames = []\n    const allFilenames = [\n      'monkey.mp4',\n      'good_job.mp4',\n      'wooow.mp4',\n      'really_girl.mp4',\n      'ooohh.mp4',\n      'cook.mp4',\n      'black_white_hihi.mp4',\n      'happy_face.mp4',\n      'marmot.mp4',\n      'nope.mp4',\n      'congrats.mp4',\n      'cat2.mp4',\n      'hiding_in_bush.mp4',\n      'blink_of_surprise.mp4',\n      'cat3.mp4',\n      'candy_cotton_girl.mp4',\n      'cat1.mp4',\n      'be_smart.mp4',\n      'hard_math.mp4',\n      'hurray_guy.mp4',\n      'gamer.mp4',\n      'disappointment.mp4',\n      'spongebob.mp4',\n      'omg_office.mp4',\n      'minion.mp4',\n      'how_to_play.mp4',\n      'trick_smile_girl.mp4',\n      'we_all_die.mp4',\n      'fire.mp4',\n      'confetti.mp4',\n      'high_five.mp4',\n      'girl_with_brush.mp4'\n    ]\n\n    for (let i = 0; i < numberOfVideos; i++) {\n      const randomIndex = Math.floor(Math.random() * allFilenames.length)\n      selectedFilenames.push(allFilenames[randomIndex])\n    }\n\n    const videoElements = selectedFilenames.map(filename => {\n      const videoObj = {\n        src: assetURL(`memes/${filename}`),\n        videoElement: document.createElement('video'),\n        loaded: false\n      }\n\n      const { videoElement } = videoObj\n      videoElement.src = videoObj.src\n      videoElement.preload = 'auto'\n      videoElement.muted = true\n      videoElement.loop = true\n      videoElement.playbackRate = 1.0\n      videoElement.setAttribute('playsinline', '')\n\n      const onCanPlayThrough = () => {\n        videoObj.loaded = true\n        const loadedVideosCount = videoElements.filter(v => v.loaded).length\n        setLoadingProgress((loadedVideosCount / numberOfVideos) * 100)\n\n        if (loadedVideosCount === numberOfVideos) {\n          setVideos(videoElements.map(v => v.videoElement))\n        }\n      }\n\n      videoElement.addEventListener('canplaythrough', onCanPlayThrough)\n      videoElement.load()\n\n      cleanupFunctions.push(() => videoElement.removeEventListener('canplaythrough', onCanPlayThrough))\n\n      return videoObj\n    })\n\n    return () => {\n      cleanupFunctions.forEach(cleanup => cleanup())\n    }\n  }, [numberOfVideos])\n\n  return { videos, loadingProgress }\n}\n\nexport { usePreloadedVideos }\n","import React from 'react'\nimport { createRoot } from 'react-dom/client'\nimport styled from 'styled-components'\nimport { StartScreen } from './lib/StartScreen'\n\nimport './styles.css'\n\nconst StyledApp = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n`\n\nconst App = () => {\n  return (\n    <StyledApp>\n      <StartScreen />\n    </StyledApp>\n  )\n}\n\nconst rootElement = document.getElementById('root')\nconst root = createRoot(rootElement)\nroot.render(<App />)\n"],"sourceRoot":""}