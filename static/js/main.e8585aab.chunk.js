(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{56:function(e,t,n){e.exports=n(92)},79:function(e,t){},80:function(e,t){},81:function(e,t){},90:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(16),r=n(1),o=n.n(r),c=n(47),i=n(24),l=n.n(i),s=n(17),u=n(96),m=n(12),d=n(19),f=n.n(d),p=n(22),h=n(11),b=n(95),g=n(97),x=n(21),E=n(45),v=n(13),j=n(0),O=function(e){var t=e.mode,n=Object(m.d)(),a=n.camera,o=n.set,c=new j.PerspectiveCamera(50,16/9,.1,1e3);return Object(r.useEffect)(function(){if("over"===t)return c.position.set(3,1,0),o({camera:c}),null;"2D"===t?(c.position.set(-20,0,1),o({camera:c})):(c.position.set(0,.8,-3),o({camera:c}))},[t]),Object(m.b)(function(){a.updateProjectionMatrix()}),null},w=n(98),y={objectUrl:{hop:"canary_hop.glb",idle:"canary_idle.glb",walk:"canary_walk.glb"},nodeCoords:"canary.geometry.attributes.position",nodeSigns:[1,-1,-1],nodeScale:2.5,nodeGroupScale:.02,meshColorIndex:"ciano",meshScale:1,debug:!1,model:{material:"Default_OBJ",scale:.02,metalness:.2,roughness:2,opacity:1,color:"white"},gridPosition:[0,-.52,.28],cameraPosition:[-20,0,0],pointColorIndex:{primary:"ciano",hovered:"magenta",active:"magenta"},pointLight:{position:[0,0,0],intensity:[2,2,2],distance:15,color:["ciano","magenta","magenta"]},bloom:{kernelSize:1,luminanceThreshold:.1,luminanceSmoothing:.05,intensity:.1},glitch:{delay:[20,30],duration:[.3,.5],strength:[.1,.3]},lights:{front:{color:"ciano"},left:{color:"white"},right:{color:"magenta"}}},k={ciano:"#01ffff",magenta:"#e6007a",white:"#ffffff",black:"#000000"},S=function(e){e.current&&(e.current.pause(),e.current.currentTime=0,e.current.play())};function M(e){return"".concat("/meme-mine","/assets/").concat(e)}function R(e){return"".concat("/meme-mine","/").concat(e)}var _,L,P,A,F,T,z,D,U,C,I=function(e){var t=e.position?e.position:[0,0,0],n=void 0===e.canJump||e.canJump,a=void 0===e.canMove||e.canMove,c=void 0!==e.muted&&e.muted,i=Object(r.useState)(t),l=Object(h.a)(i,2),s=l[0],u=l[1],d=Object(r.useState)(!1),f=Object(h.a)(d,2),p=f[0],b=f[1],g=Object(r.useState)(!1),x=Object(h.a)(g,2),E=x[0],v=x[1],O={jump:Object(r.useRef)(null),move:Object(r.useRef)(null),footstep1:Object(r.useRef)(null),footstep2:Object(r.useRef)(null),main:Object(r.useRef)(null)},R=e.animation,_=e.speed,L=e.reversed;"dead"===e.animation&&(R="idle",_=0,L=!0);var P=y.objectUrl[R],A=Object(w.a)(M(P)),F=A.scene,T=A.nodes,z=A.materials,D=A.animations,U=Object(r.useRef)(),C=Object(r.useRef)();return Object(r.useEffect)(function(){e.handleCanaryRef&&e.handleCanaryRef(C)},[C]),Object(r.useEffect)(function(){return O.jump.current=new Audio(M("audio/canary_jump.mp3")),O.move.current=new Audio(M("audio/canary_swooshleftandright.mp3")),O.footstep1.current=new Audio(M("audio/canary_footstep1.mp3")),O.footstep2.current=new Audio(M("audio/canary_footstep2.mp3")),O.main.current=new Audio(M("audio/canary_in_a_meme_mine.mp3")),Object.values(O).forEach(function(e){e.current&&e.current.load()}),function(){Object.values(O).forEach(function(e){e.current&&(e.current.pause(),e.current.removeAttribute("src"),e.current.load())})}},[]),Object(r.useEffect)(function(){C.current&&L&&(C.current.rotation.x=Math.PI/.85)},[]),Object(r.useEffect)(function(){C&&C.current&&(U.current=new j.AnimationMixer(C.current))},[R,C]),Object(r.useEffect)(function(){return U.current&&D&&D.forEach(function(e){var t=U.current.clipAction(e);t.timeScale=_,t.play()}),3===e.speed&&(O.main.current.loop=!0,S(O.main)),function(){U.current&&(U.current.stopAllAction(),v(!1))}},[D]),Object(r.useEffect)(function(){c||S(O.move)},[c,s[0]]),Object(r.useEffect)(function(){var e=function(e){a&&("ArrowRight"===e.key?u(function(e){return-1!==e[0]?[e[0]-1,e[1],e[2]]:e}):"ArrowLeft"===e.key&&u(function(e){return 1!==e[0]?[e[0]+1,e[1],e[2]]:e})),n&&("ArrowUp"!==e.key||p||0!==s[1]||(b(!0),S(O.jump))),"ArrowDown"===e.key&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[a,n,s]),Object(m.b)(function(t,n){U.current&&(U.current.update(n),"walk"===e.animation&&1===e.speed&&D.forEach(function(e){var t=U.current.clipAction(e);t.timeScale=_,t.time>e.duration/2&&!E?(S(O.footstep2),v(!0)):t.time<e.duration/2&&E&&(S(O.footstep1),v(!1))})),u(p?function(e){var t=e[1]+10*n;return t>=2.5&&b(!1),[e[0],t<=0?0:t,e[2]]}:function(e){return 0!==e[1]?[e[0],Math.max(0,e[1]-10*n),e[2]]:e})}),Object(r.useLayoutEffect)(function(){e.meshScale&&T.canary&&T.canary.scale.set(4,4,4),F.traverse(function(e){"Mesh"===e.type&&(e.receiveShadow=e.castShadow=!0)}),Object.assign(z[e.model.material],{wireframe:!1,metalness:e.model.metalness,roughness:e.model.moughness,opacity:e.model.opacity,color:new j.Color(k[e.model.color])})},[F,T,z]),o.a.createElement("mesh",{position:s,ref:C},o.a.createElement("primitive",Object.assign({object:F},e)))},B=n(94),G=function(e){var t=e.config,n=Object(r.useRef)(),a=Object(r.useRef)(),c=Object(r.useRef)(),i=Object(r.useRef)(),l=Object(r.useRef)(),s=Object(r.useRef)();return Object(m.b)(function(e){var t=e.clock.getElapsedTime(),r=15;parseInt(t)%4===1&&(r=15*Math.random()|0),n.current.position.x=Math.sin(t)/4*r,n.current.position.y=Math.cos(t)/4*r,n.current.position.z=Math.cos(t)/4*r,a.current.position.x=Math.cos(t)/4*10,a.current.position.y=Math.sin(t)/4*10,a.current.position.z=Math.sin(t)/4*10,c.current.position.x=Math.sin(t)/4*10,c.current.position.y=Math.cos(t)/4*10,c.current.position.z=Math.sin(t)/4*10}),!0===t.debug&&(Object(B.a)(i,j.PointLightHelper),Object(B.a)(l,j.PointLightHelper),Object(B.a)(s,j.PointLightHelper)),o.a.createElement(o.a.Fragment,null,o.a.createElement("group",{ref:n},o.a.createElement("pointLight",{ref:i,color:k[t.pointLight.color[0]],position:t.pointLight.position,distance:t.pointLight.distance,intensity:t.pointLight.intensity[0]})),o.a.createElement("group",{ref:a},o.a.createElement("pointLight",{ref:l,color:k[t.pointLight.color[1]],position:t.pointLight.position,distance:t.pointLight.distance,intensity:t.pointLight.intensity[1]})),o.a.createElement("group",{ref:c},o.a.createElement("pointLight",{ref:s,color:k[t.pointLight.color[2]],position:t.pointLight.position,distance:t.pointLight.distance,intensity:t.pointLight.intensity[2]})))},N=s.a.h3(_||(_=Object(a.a)(["\n  margin: 0;\n  color: #fff;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n"]))),V=s.a.a(L||(L=Object(a.a)(["\n  font-size: 14px;\n  color: #fff;\n  margin: 0;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n  text-decoration: none;\n\n  &:hover {\n    color: #e6007a;\n  }\n"]))),Z=s.a.div(P||(P=Object(a.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: end;\n  padding: 50px;\n"]))),J=function(){return o.a.createElement(Z,null,o.a.createElement(N,null,"powered by"),o.a.createElement(V,{href:"https://anything.world/",target:"_blank",rel:"noopener noreferrer"},"anything world"),o.a.createElement(V,{href:"https://kusama.network/",target:"_blank",rel:"noopener noreferrer"},"kusama network"),o.a.createElement(V,{href:"https://github.com/justadudewhohacks/face-api.js",target:"_blank",rel:"noopener noreferrer"},"face api"),o.a.createElement(V,{href:"https://giphy.com/",target:"_blank",rel:"noopener noreferrer"},"giphy"))},H=function(e){var t=e.score;return Object(r.useEffect)(function(){var e=function(e){"Enter"===e.key&&window.location.reload()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(O,{mode:"over"}),o.a.createElement(G,{config:y}),o.a.createElement(I,{animation:"dead",canMove:!1,canJump:!1,position:[0,.2,0],scale:y.model.scale,meshColorIndex:y.meshColorIndex,meshScale:y.meshScale,model:y.model}),o.a.createElement(g.a,{minPolarAngle:Math.PI/2.8,maxPolarAngle:Math.PI/1.8}),o.a.createElement(b.a,{fullscreen:!0},o.a.createElement(W,null,o.a.createElement(Q,null,"GAME OVER"),o.a.createElement(X,null,"press enter to restart"),o.a.createElement(q,null,"final score: ",t)),o.a.createElement(J,null)))},K=Object(s.b)(A||(A=Object(a.a)(["\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0; }\n"]))),W=s.a.div(F||(F=Object(a.a)(["\n  position: absolute;\n  top: 25px;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),q=s.a.h2(T||(T=Object(a.a)(["\n  color: #fff;\n  margin-top: 10px;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n"]))),Q=s.a.h1(z||(z=Object(a.a)(["\n  color: #fff;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n"]))),X=s.a.h2(D||(D=Object(a.a)(["\n  color: #fff;\n  margin-top: 125px;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n  animation: "," 1500ms linear infinite;\n"])),K),Y=function(e){var t=e.health;return o.a.createElement($,null,o.a.createElement(ee,{health:t}))},$=s.a.div(U||(U=Object(a.a)(["\n  width: 25vw;\n  background-color: #ddd;\n  border: 2px solid #666;\n  border-radius: 20px;\n  overflow: hidden;\n"]))),ee=s.a.div(C||(C=Object(a.a)(["\n  height: 20px;\n  width: ","%;\n  background-color: ",";\n  transition: width 0.5s ease-in-out;\n"])),function(e){return e.health},function(e){return e.health<50?"red":"#01ffff"}),te=o.a.forwardRef(function(e,t){var n=e.mode,a=e.opacity,r=Object(m.d)(),c=r.size,i=r.camera,l=Object(m.c)(j.TextureLoader,M("noise.png"));return Object(m.b)(function(){var e="2D"===n?i.position.x+.5:i.position.x,a=i.position.y,r="2D"===n?i.position.z:i.position.z+.5;t.current.position.set(e,a,r),t.current.lookAt(i.position)}),o.a.createElement("mesh",{ref:t},o.a.createElement("planeBufferGeometry",{args:[c.width/500,c.height/500]}),o.a.createElement("meshBasicMaterial",{map:l,transparent:!0,opacity:a}))}),ne=n(18),ae=n(14);function re(e){var t=[];e.traverse(function(e){e.position.z<=-50&&t.push(e)}),t.forEach(function(t){e.remove(t),t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()})}var oe,ce,ie,le,se,ue,me,de,fe,pe,he,be=function(e){var t=e.mode,n=e.positionZ,a=e.side,c=e.videos,i=e.handleObstacleRef,l=Object(r.useRef)(),s=Object(r.useRef)(),u=Object(r.useRef)(),d=c[Math.floor(Math.random()*c.length)];return Object(r.useEffect)(function(){l.current=d,s.current=new j.VideoTexture(d)},[]),Object(m.b)(function(){d.isPlaying||d.play()}),Object(r.useEffect)(function(){i(n,u)},[n]),Object(r.useEffect)(function(){u.current&&(u.current.rotation.y="2D"===t?Math.PI/2:0)},[t]),Object(m.b)(function(){s.current&&(s.current.needsUpdate=!0)}),o.a.createElement("mesh",{position:[a,0,n],rotation:[0,0,0],ref:u},o.a.createElement("circleGeometry",{args:[.6,32]}),o.a.createElement("meshBasicMaterial",{map:s.current,side:j.DoubleSide}))},ge=o.a.forwardRef(function(e,t){var n=e.mode,a=e.videos,c=e.setScore,i=e.hitPoints,s=e.setHitPoints,u=e.handleGameOver,d=Object(r.useState)([]),f=Object(h.a)(d,2),p=f[0],b=f[1],g=Object(r.useState)(null),x=Object(h.a)(g,2),E=x[0],v=x[1],O=Object(r.useState)(null),w=Object(h.a)(O,2),y=w[0],k=w[1],S=Object(r.useRef)({elapsedTime:0,delta:0}),M=Object(r.useRef)(2),R=Object(r.useRef)(!1),_=Object(r.useRef)(!1),L=function(e,t){b(function(n){return n.map(function(n){return n.z===e&&t.current?Object(ae.a)({},n,{ref:t}):n})})};Object(m.b)(function(e){var n=e.clock;if(S.current.delta=n.getElapsedTime()-S.current.elapsedTime,t&&t.current){var a=(new j.Box3).setFromObject(t.current),r=(new j.Box3).setFromObject(t.current),o=new j.Vector3,m=new j.Vector3;a.getCenter(o),a.getSize(m),m.multiplyScalar(.23);var d=new j.Vector3(m.x,m.z,m.y),f=new j.Box3;f.setFromCenterAndSize(o,d);var h=new j.Vector3,b=new j.Vector3;r.getCenter(h),r.getSize(b),b.multiplyScalar(.35),b.y*=1.6;var g=new j.Vector3(b.x,b.z,b.y),x=new j.Box3;x.setFromCenterAndSize(h,g);var O=!1;p.forEach(function(e){if(e.ref&&e.ref.current){var t=(new j.Box3).setFromObject(e.ref.current);f&&t&&(_.current=f.intersectsBox(t)),x&&t&&(R.current=x.intersectsBox(t))}if(_.current){s(function(e){return e-5}),y&&l.a.dismiss(y);var n=l.a.error("DAMAGE TAKEN",{duration:2500,icon:"\ud83d\udca5",position:"bottom-center",style:{borderRadius:"10px",background:"transparent",color:"#fff",fontWeight:"bold"}});return k(n),void(i<1&&u(!0))}if(R.current){O=!0,c(function(e){return e+M.current}),E&&l.a.dismiss(E);var a=l.a.success("BONUS +".concat(M.current),{duration:2500,icon:"\u2b50",position:"top-center",style:{borderRadius:"10px",background:"transparent",color:"#fff",fontWeight:"bold"}});v(a),M.current<256&&(M.current*=2)}}),O||(M.current=2)}});var P=Object(m.d)().scene;return Object(m.b)(function(e){var n,a,r=e.clock;if(S.current.delta=r.getElapsedTime()-S.current.elapsedTime,t&&t.current&&(S.current.delta>=.1&&(S.current.elapsedTime=r.getElapsedTime(),b(function(e){return e.map(function(e){return Object(ae.a)({},e,{z:e.z-1})}).filter(function(e){return e.z>=-10})}),re(P)),p.length<5)){var o=p[p.length-1],c=o?o.z:0,i=(n=10,a=20,Math.floor(Math.random()*(a-n))+n),l=Math.floor(3*Math.random())-1,s={id:Date.now()+Math.random(),z:c+i,side:l,ref:null};b(function(e){return[].concat(Object(ne.a)(e),[s])})}}),o.a.createElement(o.a.Fragment,null,p.map(function(e){var t=e.id,r=e.z,c=e.side;return o.a.createElement(be,{key:t,mode:n,positionZ:r,side:c,videos:a,handleObstacleRef:L})}))}),xe=o.a.forwardRef(function(e,t){var n=e.positionZ,a="left"===e.side?-1.5:1.5;return o.a.createElement("mesh",{position:[a,0,n],rotation:[Math.PI/2,0,0],ref:t},o.a.createElement("planeGeometry",{args:[.1,1e3]}),o.a.createElement("meshBasicMaterial",{color:16777215,side:j.DoubleSide}))}),Ee=o.a.forwardRef(function(e,t){var n=e.positionZ;return o.a.createElement("mesh",{position:[0,-.52,n],rotation:[Math.PI/2,0,0],ref:t},o.a.createElement("planeGeometry",{args:[.1,5]}),o.a.createElement("meshBasicMaterial",{color:16777215,side:j.DoubleSide}))}),ve=o.a.forwardRef(function(e,t){var n=Object(r.useState)([]),a=Object(h.a)(n,2),c=a[0],i=a[1],l=Object(r.useState)(0),s=Object(h.a)(l,2),u=s[0],d=s[1],f=Object(r.useRef)(),p=Object(r.useRef)({elapsedTime:0,delta:0}),b=Object(m.d)().scene;return Object(m.b)(function(e){var n=e.clock;if(p.current.delta=n.getElapsedTime()-p.current.elapsedTime,t&&t.current){p.current.delta>=.05&&(p.current.elapsedTime=n.getElapsedTime(),d(function(e){return e+1}),i(function(e){return e.map(function(e){return e-1})}));var a=f.current?f.current.position.z:0;if(c.length<5||u%5>a){var r=a+20;i(function(e){return[].concat(Object(ne.a)(e),[r])})}c.length>5&&(i(function(e){return e.slice(1)}),re(b))}}),o.a.createElement(o.a.Fragment,null,c.map(function(e,t){return o.a.createElement(o.a.Fragment,{key:t},o.a.createElement(Ee,{positionZ:e,ref:t===c.length-1?f:void 0}),o.a.createElement(xe,{positionZ:e,side:"left"}),o.a.createElement(xe,{positionZ:e,side:"right"}))}))}),je=function(e){var t=e.videos,n=Object(r.useState)(null),a=Object(h.a)(n,2),c=a[0],i=a[1],l=Object(r.useState)(!1),s=Object(h.a)(l,2),u=s[0],m=s[1],d=Object(r.useState)(0),j=Object(h.a)(d,2),w=j[0],k=j[1],_=Object(r.useState)(!1),L=Object(h.a)(_,2),P=L[0],A=L[1],F=Object(r.useState)("3D"),T=Object(h.a)(F,2),z=T[0],D=T[1],U=Object(r.useState)(100),C=Object(h.a)(U,2),B=C[0],N=C[1];Object(r.useEffect)(function(){V.current=new Audio(M("audio/glitch.mp3"));var e=2e4+1e4*Math.random(),t=setTimeout(function e(){A(!0),S(V),setTimeout(function(){D(function(t){var n,a="2D"===t?"3D":"2D";return n="3D"===a?2e4+1e4*Math.random():2e3+3e3*Math.random(),setTimeout(e,n),a})},800),setTimeout(function(){A(!1)},1e3)},e);return function(){return clearTimeout(t)}},[]),Object(r.useEffect)(function(){if(u)for(var e=window.setTimeout(function(){},0);e--;)window.clearTimeout(e)},[u]),Object(r.useEffect)(function(){(function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Promise.all([x.c.faceExpressionNet.loadFromUri(R("/models")),x.c.faceRecognitionNet.loadFromUri(R("/models")),x.c.ssdMobilenetv1.loadFromUri(R("/models")),x.c.tinyFaceDetector.loadFromUri(R("/models")),x.c.mtcnn.loadFromUri(R("/models")),x.c.faceLandmark68Net.loadFromUri(R("/models")),x.c.faceLandmark68TinyNet.loadFromUri(R("/models")),x.c.ageGenderNet.loadFromUri(R("/models"))]);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[]);var V=Object(r.useRef)(null),Z=0,J=!1;P&&(Z=.5,J=!0);var K=Object(r.useRef)();return u?o.a.createElement(H,{score:w}):o.a.createElement(o.a.Fragment,null,o.a.createElement(O,{mode:z}),o.a.createElement(G,{config:y}),o.a.createElement(ve,{ref:c}),o.a.createElement(ge,{mode:z,videos:t,hitPoints:B,setHitPoints:N,setScore:k,handleGameOver:function(e){return m(e)},ref:c}),o.a.createElement(I,{animation:"walk",speed:3,scale:y.model.scale,meshColorIndex:y.meshColorIndex,meshScale:y.meshScale,model:y.model,handleCanaryRef:function(e){e.current&&i(e)}}),o.a.createElement(te,{mode:z,opacity:Z,ref:K}),o.a.createElement(E.a,null,o.a.createElement(E.b,{dtSize:128,mode:v.n.SPORADIC,delay:[0,0],duration:[1e3,1e3],active:J})),o.a.createElement(g.a,{minPolarAngle:Math.PI/2.8,maxPolarAngle:Math.PI/1.8,enableZoom:!1,enableRotate:!1}),o.a.createElement(b.a,{fullscreen:!0},o.a.createElement(Oe,null,o.a.createElement(we,null,"score: ",w),o.a.createElement(Y,{health:B}))))},Oe=s.a.div(oe||(oe=Object(a.a)(["\n  position: absolute;\n  top: 200px;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),we=s.a.h1(ce||(ce=Object(a.a)(["\n  color: #fff;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n"]))),ye=function(e){var t=e.videos,n=Object(r.useState)(!0),a=Object(h.a)(n,2),c=a[0],i=a[1],l=Object(r.useState)(!0),s=Object(h.a)(l,2),u=s[0],m=s[1],d=Object(r.useRef)(),E=320,v=Object(r.useState)(!1),j=Object(h.a)(v,2),O=j[0],w=j[1],k="ontouchstart"in window||navigator.maxTouchPoints>0;Object(r.useEffect)(function(){if(!u){var e=function(e){"Enter"===e.key&&i(!1)},t=function(e){"touchstart"===e.type&&i(!1)};return document.addEventListener("keydown",e),k&&document.addEventListener("touchstart",t),function(){document.removeEventListener("keydown",e),k&&document.addEventListener("touchstart",t)}}},[u,m]),Object(r.useEffect)(function(){(function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Promise.all([x.c.faceExpressionNet.loadFromUri(R("/models")),x.c.faceRecognitionNet.loadFromUri(R("/models")),x.c.ssdMobilenetv1.loadFromUri(R("/models")),x.c.tinyFaceDetector.loadFromUri(R("/models")),x.c.mtcnn.loadFromUri(R("/models")),x.c.faceLandmark68Net.loadFromUri(R("/models")),x.c.faceLandmark68TinyNet.loadFromUri(R("/models")),x.c.ageGenderNet.loadFromUri(R("/models"))]);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[]);var S=function(e){"webcam"===e&&(w(!0),navigator.mediaDevices.getUserMedia({video:{width:E}}).then(function(e){if(d.current){var t=d.current;t.srcObject=e,t.play()}}).catch(function(e){console.error(e)})),m(!1)};return o.a.createElement(o.a.Fragment,null,O&&o.a.createElement(b.a,{fullscreen:!0},o.a.createElement("div",{id:"webcam_holder"},o.a.createElement("video",{id:"webcam",ref:d,height:240,width:E,onPlay:function(){setInterval(Object(p.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=5;break}return e.next=3,x.b(d.current,new x.a).withFaceLandmarks().withFaceExpressions();case 3:(t=e.sent)&&(t.expressions.angry>.5&&window.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowLeft"})),t.expressions.surprised>.5&&window.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowRight"})),t.expressions.happy>.6&&window.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowUp"})));case 5:case"end":return e.stop()}},e)})),100)}}),o.a.createElement("p",null,o.a.createElement("span",{role:"img","aria-label":"angry face"},"\ud83d\ude2c\ud83d\ude20 (angry) to move left"),o.a.createElement("br",null),o.a.createElement("span",{role:"img","aria-label":"surprised face"},"\ud83d\ude32 (surprised) to move right"),o.a.createElement("br",null),o.a.createElement("span",{role:"img","aria-label":"happy face"},"\ud83d\ude06 (happy) to jump!")))),c?o.a.createElement(o.a.Fragment,null,o.a.createElement(G,{config:y}),o.a.createElement(I,{animation:u?"idle":"walk",speed:1,position:[0,.2,0],scale:y.model.scale,meshColorIndex:y.meshColorIndex,meshScale:y.meshScale,model:y.model,muted:!!u}),o.a.createElement(g.a,{minPolarAngle:Math.PI/2.8,maxPolarAngle:Math.PI/1.8}),o.a.createElement(b.a,{fullscreen:!0},u?o.a.createElement(Se,null,o.a.createElement(Me,null,"canary in a meme mine"),o.a.createElement(Re,null,"select game mode:"),o.a.createElement(Pe,{onClick:function(){return S("keyboard")}},o.a.createElement("span",{role:"img","aria-label":"keyboard"},"\u2328\ufe0f keyboard")),o.a.createElement(Pe,{onClick:function(){return S("webcam")}},o.a.createElement("span",{role:"img","aria-label":"webcam"},"\ud83d\udcf7 webcam"))):o.a.createElement(Se,null,o.a.createElement(Me,null,"canary in a meme mine"),o.a.createElement(Le,null,"get ready and press enter to start"),o.a.createElement("fieldset",null,o.a.createElement("legend",{style:{color:"#e6007a"}},"hint"),o.a.createElement(_e,null,"the only way to score is by nearly avoiding collision with memes"),o.a.createElement(_e,null,"but be careful, you will lose health if you hit the memes"),o.a.createElement(_e,{style:{color:"#e6007a"}},"the closer you get, the more points you earn!"))),o.a.createElement(J,null))):o.a.createElement(je,{videos:t}))},ke=Object(s.b)(ie||(ie=Object(a.a)(["\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0; }\n"]))),Se=s.a.div(le||(le=Object(a.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),Me=s.a.h1(se||(se=Object(a.a)(["\n  margin: 0;\n  color: #fff;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n"]))),Re=s.a.h2(ue||(ue=Object(a.a)(["\n  color: #fff;\n  margin-top: 300px;\n  margin-bottom: 5px;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n"]))),_e=s.a.p(me||(me=Object(a.a)(["\n  color: #fff;\n  margin: 1px;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n  text-align: center;\n"]))),Le=s.a.h2(de||(de=Object(a.a)(["\n  color: #fff;\n  margin-top: 300px;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n  animation: "," 1500ms linear infinite;\n"])),ke),Pe=s.a.h2(fe||(fe=Object(a.a)(["\n  margin: 5px;\n  color: #fff;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n  cursor: pointer;\n\n  &:hover {\n    color: #e6007a;\n  }\n"]))),Ae=n(53);var Fe,Te,ze=function(e){var t=e.progress;return o.a.createElement(De,null,o.a.createElement(Ue,{progress:t}))},De=s.a.div(pe||(pe=Object(a.a)(["\n  width: 25vw;\n  background-color: #ddd;\n  border: 2px solid #666;\n  border-radius: 20px;\n  overflow: hidden;\n"]))),Ue=s.a.div(he||(he=Object(a.a)(["\n  height: 20px;\n  width: ","%;\n  background-color: #e6007a;\n  transition: width 0.5s ease-in-out;\n"])),function(e){return e.progress});var Ce,Ie=function(){var e=function(e){var t=Object(r.useState)([]),n=Object(h.a)(t,2),a=n[0],o=n[1],c=Object(r.useState)(0),i=Object(h.a)(c,2),l=i[0],s=i[1];return Object(r.useEffect)(function(){var t=new Ae.a,n=[],a=0,r=["canary_walk.glb","canary_idle.glb","canary_hop.glb"].map(function(n){var c={src:M(n),loaded:!1};return t.load(c.src,function(t){c.gltf=t,c.loaded=!0,s(++a/e*100),a===e&&o(r.map(function(e){return e.gltf}))},void 0,function(e){console.error("Error loading model:",e)}),c});return function(){n.forEach(function(e){return e()})}},[]),{models:a,loadingProgress:l}}(3),t=e.models,n=e.modelsLoadingProgress,a=function(e){var t=Object(r.useState)([]),n=Object(h.a)(t,2),a=n[0],o=n[1],c=Object(r.useState)(0),i=Object(h.a)(c,2),l=i[0],s=i[1];return Object(r.useEffect)(function(){for(var t=[],n=[],a=["monkey.mp4","good_job.mp4","wooow.mp4","really_girl.mp4","ooohh.mp4","cook.mp4","black_white_hihi.mp4","happy_face.mp4","marmot.mp4","nope.mp4","congrats.mp4","cat2.mp4","hiding_in_bush.mp4","blink_of_surprise.mp4","cat3.mp4","candy_cotton_girl.mp4","cat1.mp4","be_smart.mp4","hard_math.mp4","hurray_guy.mp4","gamer.mp4","disappointment.mp4","spongebob.mp4","omg_office.mp4","minion.mp4","how_to_play.mp4","trick_smile_girl.mp4","we_all_die.mp4","fire.mp4","confetti.mp4","high_five.mp4","girl_with_brush.mp4"],r=0;r<e;r++){var c=Math.floor(Math.random()*a.length);n.push(a[c])}var i=n.map(function(n){var a={src:M("memes/".concat(n)),videoElement:document.createElement("video"),loaded:!1},r=a.videoElement;r.src=a.src,r.preload="auto",r.muted=!0,r.loop=!0,r.playbackRate=1,r.setAttribute("playsinline","");var c=function(){a.loaded=!0;var t=i.filter(function(e){return e.loaded}).length;s(t/e*100),t===e&&o(i.map(function(e){return e.videoElement}))};return r.addEventListener("canplaythrough",c),r.load(),t.push(function(){return r.removeEventListener("canplaythrough",c)}),a});return function(){t.forEach(function(e){return e()})}},[e]),{videos:a,loadingProgress:l}}(32),c=a.videos,i=a.videosLoadingProgress;return t.length<3?o.a.createElement(Be,null,o.a.createElement(Ge,null,"loading 3D models ..."),o.a.createElement(ze,{progress:n})):c.length<32?o.a.createElement(Be,null,o.a.createElement(Ge,null,"loading memes..."),o.a.createElement(ze,{progress:i})):o.a.createElement(r.Suspense,{fallback:null},o.a.createElement(m.a,{shadows:!0,dpr:[1,2],camera:{position:[3,1,3],fov:50},performance:{min:.1},onCreated:function(e){var t=e.gl,n=function(e){e.preventDefault(),alert("WebGL context lost. Reloading the page for restoration..."),window.location.reload()},a=t.domElement;return a.addEventListener("webglcontextlost",n,!1),function(){a.removeEventListener("webglcontextlost",n)}}},o.a.createElement(u.a,{all:!0}),o.a.createElement(ye,{videos:c})))},Be=s.a.div(Fe||(Fe=Object(a.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),Ge=s.a.h1(Te||(Te=Object(a.a)(["\n  margin: 0;\n  color: #fff;\n  text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;\n"]))),Ne=(n(90),s.a.div(Ce||(Ce=Object(a.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n"])))),Ve=function(){return o.a.createElement(Ne,null,o.a.createElement(i.Toaster,null),o.a.createElement(Ie,null))},Ze=document.getElementById("root");Object(c.createRoot)(Ze).render(o.a.createElement(r.StrictMode,null,o.a.createElement(Ve,null)))}},[[56,2,1]]]);
//# sourceMappingURL=main.e8585aab.chunk.js.map